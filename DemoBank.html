<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Banking Website ‚Äì Design Patterns Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f7fa; }
    header { background:#2c3e50; color:white; padding:20px; text-align:center; }
    nav { background:#34495e; padding:10px; display:flex; justify-content:center; }
    nav button {
      background:#1abc9c; border:none; color:white; padding:10px 20px;
      margin:0 10px; cursor:pointer; border-radius:5px; font-size:16px;
    }
    nav button:hover { background:#16a085; }
    .container { padding:20px; display:none; }
    .active { display:block; }
    h2 { color:#2c3e50; }
    .observer-box, .command-box {
      background:white; padding:15px; border-radius:10px; margin:10px 0;
      box-shadow:0 2px 5px rgba(0,0,0,0.1);
    }
    input, select {
      padding:10px; width:100%; margin:8px 0; border:1px solid #ccc; border-radius:5px;
    }
    .place-btn {
      background:#2980b9; color:white; border:none; padding:10px 20px;
      border-radius:5px; cursor:pointer; margin-top:10px;
    }
    .place-btn:hover { background:#1f6391; }
  </style>
</head>
<body>
  <header>
    <h1>üè¶ Banking Website ‚Äì Design Patterns</h1>
    <p>Observer | Strategy | Command Patterns Demo</p>
  </header>

  <nav>
    <button onclick="showContent('home')">Home</button>
    <button onclick="showContent('observer')">Observer</button>
    <button onclick="showContent('strategy')">Strategy</button>
    <button onclick="showContent('command')">Command</button>
  </nav>

  <!-- Home -->
  <div id="home" class="container active">
    <h2>Welcome to Banking Design Pattern Demo</h2>
    <p>This demo illustrates three important design patterns in a <b>Banking Context</b>:</p>
    <ul>
      <li><b>Observer Pattern</b> ‚Äì Notify users of balance updates in real-time.</li>
      <li><b>Strategy Pattern</b> ‚Äì Calculate EMI for different loan types (Home, Car, Personal) based on amount & duration.</li>
      <li><b>Command Pattern</b> ‚Äì Perform transactions (Deposit, Withdraw, Transfer).</li>
    </ul>
    <p>Use the navigation bar to explore each section.</p>
  </div>

  <!-- Observer Pattern -->
  <div id="observer" class="container">
    <h2>Observer Pattern ‚Äì Balance Notifications</h2>
    <div class="observer-box">
      <label><b>Enter Amount to Deposit:</b></label>
      <input type="number" id="depositInput" placeholder="Enter amount">
      <button class="place-btn" onclick="depositMoney()">Deposit</button>
      <p id="balance">üí∞ Current Balance: ‚Çπ0</p>
      <p id="user1"></p>
      <p id="user2"></p>
    </div>
  </div>

  <!-- Strategy Pattern -->
  <div id="strategy" class="container">
    <h2>Strategy Pattern ‚Äì Loan EMI Calculation</h2>
    <label><b>Select Loan Type:</b></label>
    <select id="loanOption">
      <option value="home">Home Loan (8% Interest)</option>
      <option value="car">Car Loan (10% Interest)</option>
      <option value="personal">Personal Loan (12% Interest)</option>
    </select>

    <label><b>Loan Amount (‚Çπ):</b></label>
    <input type="number" id="loanAmount" placeholder="Enter amount">

    <label><b>Duration (Years):</b></label>
    <input type="number" id="loanYears" placeholder="Enter years">

    <button class="place-btn" onclick="calculateLoan()">Calculate EMI</button>
    <div id="result"></div>
  </div>

  <!-- Command Pattern -->
  <div id="command" class="container">
    <h2>Command Pattern ‚Äì Transactions</h2>
    <div class="command-box">
      <label><b>Enter Amount:</b></label>
      <input type="number" id="cmdAmount" placeholder="Enter amount">
      <select id="cmdType">
        <option value="deposit">Deposit</option>
        <option value="withdraw">Withdraw</option>
        <option value="transfer">Transfer</option>
      </select>
      <button class="place-btn" onclick="executeTransaction()">Execute</button>
      <p id="cmdBalance">üí∞ Current Balance: ‚Çπ0</p>
      <p id="cmdLog"></p>
    </div>
  </div>

  <script>
    // Navigation
    function showContent(id) {
      document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    /* ---------------- Observer Pattern ---------------- */
    class Subject {
      constructor() { this.observers = []; this.balance = 0; }
      addObserver(observer) { this.observers.push(observer); }
      notify() { this.observers.forEach(o => o.update(this.balance)); }
      deposit(amount) { this.balance += amount; this.notify(); }
    }
    class Observer {
      constructor(elementId) { this.elementId = elementId; }
      update(balance) {
        document.getElementById(this.elementId).innerText = "üîî User notified: Balance is ‚Çπ" + balance;
      }
    }
    const bankAccount = new Subject();
    bankAccount.addObserver(new Observer("user1"));
    bankAccount.addObserver(new Observer("user2"));

    function depositMoney() {
      const amt = parseFloat(document.getElementById("depositInput").value);
      if (!amt) return;
      bankAccount.deposit(amt);
      document.getElementById("balance").innerText = "üí∞ Current Balance: ‚Çπ" + bankAccount.balance;
    }

    /* ---------------- Strategy Pattern ---------------- */
    class HomeLoan {
      calculate(amount, years) { return computeEMI(amount, years, 8); }
    }
    class CarLoan {
      calculate(amount, years) { return computeEMI(amount, years, 10); }
    }
    class PersonalLoan {
      calculate(amount, years) { return computeEMI(amount, years, 12); }
    }
    class LoanContext {
      setStrategy(strategy) { this.strategy = strategy; }
      executeStrategy(amount, years) { return this.strategy.calculate(amount, years); }
    }
    function computeEMI(P, years, annualRate) {
      const n = years * 12;
      const r = annualRate / 12 / 100;
      const emi = (P * r * Math.pow(1+r, n)) / (Math.pow(1+r, n) - 1);
      return `üí∞ Loan Amount: ‚Çπ${P.toLocaleString()} <br>üìÖ Duration: ${years} years <br>üìä EMI (${annualRate}%): <b>‚Çπ${emi.toFixed(2)}/month</b>`;
    }
    function calculateLoan() {
      const option = document.getElementById("loanOption").value;
      const amount = parseFloat(document.getElementById("loanAmount").value);
      const years = parseInt(document.getElementById("loanYears").value);
      if (!amount || !years) {
        document.getElementById("result").innerHTML = "<p style='color:red;'>‚ö†Ô∏è Please enter both loan amount and duration.</p>";
        return;
      }
      const context = new LoanContext();
      if (option === "home") context.setStrategy(new HomeLoan());
      if (option === "car") context.setStrategy(new CarLoan());
      if (option === "personal") context.setStrategy(new PersonalLoan());
      document.getElementById("result").innerHTML = "<p>" + context.executeStrategy(amount, years) + "</p>";
    }

    /* ---------------- Command Pattern ---------------- */
    class BankAccount {
      constructor() { this.balance = 0; }
      deposit(amount) { this.balance += amount; return "Deposited ‚Çπ" + amount; }
      withdraw(amount) {
        if (amount > this.balance) return "‚ùå Insufficient balance";
        this.balance -= amount; return "Withdrew ‚Çπ" + amount;
      }
      transfer(amount) {
        if (amount > this.balance) return "‚ùå Insufficient balance";
        this.balance -= amount; return "Transferred ‚Çπ" + amount;
      }
    }
    class Command {
      constructor(account, amount) { this.account = account; this.amount = amount; }
      execute() {}
    }
    class DepositCommand extends Command {
      execute() { return this.account.deposit(this.amount); }
    }
    class WithdrawCommand extends Command {
      execute() { return this.account.withdraw(this.amount); }
    }
    class TransferCommand extends Command {
      execute() { return this.account.transfer(this.amount); }
    }
    class Invoker {
      run(command) { return command.execute(); }
    }
    const myAccount = new BankAccount();
    const invoker = new Invoker();
    function executeTransaction() {
      const amt = parseFloat(document.getElementById("cmdAmount").value);
      const type = document.getElementById("cmdType").value;
      if (!amt) return;
      let command;
      if (type === "deposit") command = new DepositCommand(myAccount, amt);
      if (type === "withdraw") command = new WithdrawCommand(myAccount, amt);
      if (type === "transfer") command = new TransferCommand(myAccount, amt);
      const result = invoker.run(command);
      document.getElementById("cmdBalance").innerText = "üí∞ Current Balance: ‚Çπ" + myAccount.balance;
      document.getElementById("cmdLog").innerText = "üì¢ " + result;
    }
  </script>
</body>
</html>
